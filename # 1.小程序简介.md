# 0.小程序简介

在开始之前，不如我们用几个问答来了解一下微信小程序。

问：微信小程序是什么？

答：微信小程序是一种内置于微信的轻应用。

问：微信小程序相比 App 有什么优势？

答：方便，即用即走，无需下载，扫码或搜索进入；强大，小程序中内置了很多接口，可以完美满足日常需求；流量大，拥有日活10亿用户的微信平台等。

问：微信小程序的现状怎么样？

答：截止19年初，发布两年的微信小程序覆盖了休闲，工具，购物等200个行业，使用人数超1000亿人次，创造了5000亿+的商业价值。

问：微信小程序的开发语言是什么？

答：类似于  `Html+Css+JS`  的语言，有前端开发经验的人员很容易上手。



   经过这几个问题，大家对微信小程序也有了初步了解，下面开始进入小程序的开发流程讲解。

# 1.申请账号

在开发之前，需要申请开发权限。我们可以打开 [小程序注册](<https://mp.weixin.qq.com/wxopen/waregister?action=step1>) 进行账号注册申请。

   可以看到需要填入注册邮箱，密码，验证码等信息。根据相关要求填写之后，勾选同意协议，点击 `注册` 按钮。

   这时我们的邮箱会受到一封激活邮件，打开这封邮件点击里面的激活链接完成该账号的激活。

   激活完毕之后便拥有了开发权限，然后开始正式申请小程序账号—— `AppID` ,该账号分为两种，个人账号和企业账号。

## 1.1 个人申请

个人只能拥有一个 `AppID` 。在主体类型中选择个人，在填写好相关信息之后便可。


## 1.2 企业申请

   除了个体工商户申请5个 `AppID` 之外，其他类型的企业主体都可以申请50个 `AppID` ，即50个小程序账号。

企业认证时需要输入企业名称，营业执照注册号，还需要用绑定了管理员本人银行卡的微信扫描二维码，用来验证管理员的身份。

关于企业认证方式有两种，如下表：

|项目|小额打款验证|微信认证|
|----|----|-----|
|审核费用|/|300元/年|
|审核时间|1-3个工作日|1-5个工作日|
|微信支付申请|无|有|
|可绑定开发者数量| 10个|20个|

   如果做展示型小程序，可以选择小额打款验证，省下300元审核费用；

   如果涉及到交易，直接选择微信认证，通过微信认证的小程序可以使用更多功能，应用场景更加多样。



---

注册完成后，可以在 [微信公众平台](https://mp.weixin.qq.com/wxopen/wacodepage?action=getcodepage&token=86156440&lang=zh_CN) 中点击设置对小程序的信息进行更改与填写。


# 2.开发

​    好了，恭喜你，你已经正式成为一名开发者了。收拾好心情，一起进入微信小程序的世界。

## 2.1 下载开发工具

   工欲善其事必先利其器，就像电影中放大招之前要先喊咒语一样，在开发前我们也需要对开发工具进行下载和配置。

   1. 选择下载

      进入 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) 页面 选择适合自己电脑的版本进行下载。**建议下载稳定版**


   2. 安装

      下载完成之后，双击打开安装文件，选择安装路径即可。

      

   3. 扫码进入

      安装完成之后，打开工具会出现一个二维码，使用微信扫码登录后，在页面的上方选择新建项目或者导入项目。

      

   4. 项目选择

       - 新建项目

         项目名称：给自己的项目起个优雅动听的名字。

         目录：项目的路径。

         AppID：前面申请好的 AppID。

         填入这三个信息之后直接点击下方 `新建` 即可完成创建。

       - 导入项目

         如果需要导入已有项目的话，首先点击工具上方的 `导入项目 ` 按钮，其次就是起名，选择路径，填入 `AppID` 。最后点击导入即可。


## 2.2 开发程序

看到模拟器上显示出自己的微信头像和那句熟悉的 hello ,是不是有点迫不及待要去弹键盘了。不要急，我们先了解一下编写流程。

*如果是导入的项目，不需要开发的话，建议直接跳到第5步进行。*

   ##### 1. 文件类型
进入之后可以看到有四种类型的文件，为了能让大家更直白地明白他们的作用，这里用人来做例子：


   - json
     
     **静态配置** 规定整个小程序或单个界面的一些静态配置，如导航栏，标题栏，窗口颜色等。相当于固定了我们的身高体重，穿多大码的鞋子。
     
   - wxml
     
      **渲染页面** 使用一些标签将界面渲染出来，呈现出用户可以看到的画面。所以，它的作用就是创造出一个人的身体。
      
   - wxss
     
      **页面样式** 将页面进行美化，增加一些样式和效果。为我们穿上漂亮的衣服，戴上精美的配饰。
      
   - js
     
     **逻辑交互** 调用 `Api`，处理数据，响应操作等。js 的作用就像我们的身体内部系统一样，在我们看不到的地方进行着维持生命体征的工作，呼吸，运动，代谢等。
     


   ##### 2. 生命周期

   就像每个生命体都有生老病死一样，小程序也有它自己的生命周期。
    
   - 应用生命周期
     
      整体的生命周期，打开 `app.js` 可以看到，整个代码段都被 `App({})` 包含在了里面，`App({})` 就是整个应用的注册名，只能有唯一存在。  括号里面可以看到 `onLaunch` `onShow` 等方法，这是小程序规定的运行启动顺序，当 `onShow` 加载完之后进入页面生命周期的加载。
      
   - 页面生命周期
     
       单个页面的生命周期，在 `app.json` 中的 `pages` 下写入页面路径。当应用生命周期的 `onShow` 加载完之后开始对第一个页面进行加载。
       
     
      页面生命周期注册为 `Page({})` , 每个页面中也只能有一个 `Page({})` 存在。里面的加载顺序为 `onLoad` `onShow` `onReady` ,此外还有一些其他方法，如 `页面隐藏 onHide` `页面卸载 onUnload` `下拉刷新 onPullDownRefresh` `上拉触底 onReachBottom` `分享 onShareAppMessage` 等。 


  ##### 3. Api 的调用

   `Api` 是小程序中最重要的一环，内置功能的调用，外部数据的收发都需要用到它。在微信小程序，`Api` 也分为两种，内置`Api` 和外部`Api` 。

   - 内置Api

     一般以 `wx.` 开头，这是微信内置的，主要用来获取内部设备和微信接口。比如在 `app.js` 中使用的 `wx.getSystemInfo` 获取系统信息。
     
   - 外部Api

     外部 `Api` 大多是通过 `wx.request` 调用的，主要用来获取数据库的数据，以及与后台进行传值交互。
     

     **外部 api 的网站接口必须是 https 类型的，即经过 SSL 证书加密过后的**

        

  ##### 4. 用户标识符

   在传统的应用中，用户通过注册生成几个独一无二的主键用来当做身份的唯一标识符。但如果在微信小程序中再去使用注册的话，显然是比较落后的。

   微信小程序内置了调用用户信息的接口，经过深度调用之后，可以得到一个 `openid` ，这就是在微信小程序中用来标识用户唯一性的数据。

​      

  #####  5. 小程序实例

   微信小程序内置了很多功能，具体有哪些我们可以使用微信搜索 `小程序实例` 小程序进行查看演示，找出自己的项目中需要用到的功能。

 #####  6. 编译预览

   在开发完应用之后，我们可以点击微信开发者工具中的 `预览` 按钮，使用微信扫码进行手机端预览。

   **这里只有管理员和开发者才有权限。**


# 3.上传

行百里者半九十，程序预览测试没有问题的话，就要上传发布了。这时不要激动，一步步地跟着过程认真来。

  ##### 1. 上传代码

   在微信开发者工具的右上方点击 `上传` 按钮，填入版本号，和项目备注，最后点击上传。

  ##### 2. 提交审核

   登录 [微信公众平台](<https://mp.weixin.qq.com/wxopen/wacodepage?action=getcodepage&token=86156440&lang=zh_CN>) 点击版本管理，可以看到刚刚上传的程序显示在了 "开发版本" 下面。

   点击绿色的 `提交审核` 按钮进入配置功能页面，填写主页面路径，标题，服务类目，标签等，这一步是为了使用户更有利地搜索出该小程序。

   最后点击提交审核。这时的小程序就会出现在"审核版本"下方。

  ##### 3. 发布

   一般在一个工作日之内，微信就会发送审核结果到管理员的微信中。如果审核通过的话，就可以登录  [微信公众平台](<https://mp.weixin.qq.com/wxopen/wacodepage?action=getcodepage&token=86156440&lang=zh_CN>) 对小程序进行发布了。

  ##### 4. 暂停服务

   发布之后的小程序会出现在"线上版本"下方。如果遇到了线上问题，可以点击详情后的倒三角选择版本回退或暂停服务。

# 4.上线后续

当自己的小程序上线之后，我们还可以为他添砖加瓦，使它更完美更实用。

  ##### 1. 客服

   在 [微信公众平台](<https://mp.weixin.qq.com/wxopen/wacodepage?action=getcodepage&token=86156440&lang=zh_CN>) 中左侧导航栏中点击客服进入客服添加界面。

   一个小程序可以绑定100个客服，点击 `添加` 按钮，输入要绑定的客服微信号。

   客服可以在登录 [客服网页端](<https://mpkf.weixin.qq.com/cgi-bin/kfindex?token=75297548>) ， 或者微信搜索 **客服小助手** 小程序进行服务会话。

  ##### 2. 运营数据

   管理员和具有数据分析权的用户，可以用两种方法查看小程序的运营数据，如（用户画像，访问来源，访客数量等）

   - 通过网页端的  [微信公众平台](<https://mp.weixin.qq.com/wxopen/wacodepage?action=getcodepage&token=86156440&lang=zh_CN>) 中的统计功能查看。
   - 通过小程序 `小程序数据助手` 进行查看

  ##### 3. 推广

   - 个人小程序的访客超过1千人后且无违规记录，便可以申请开通流量主，接入广告从而获得收益。
   - 企业小程序可以申请开通广告主，将自己的小程序推广在朋友圈，公众号等场景下。

   



